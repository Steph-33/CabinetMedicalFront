<div id="patientPage">

  <div id="allPatients">
    <app-generic-button (click)="toggleAllPatients()" title="Afficher tous les patients"></app-generic-button>

    <div *ngIf="!hidden_all_patients" id="hiddenPartAll">
    <!--<div [hidden]="hidden_all_patients" id="hiddenPartAll">-->
      <div *ngFor="let patient of patients">
        <!--<div *ngIf="patient.active"> -->
        <div class="field">
          <fieldset class="patientField" [ngClass]="{'activeClass': patient.active, 'inactiveClass': !patient.active}"><legend>{{patient.id}}</legend>
            {{patient.nomPatient}} {{patient.prenomPatient}} <br/>
            Sexe : {{patient.sexe}} <br/>
            Né(e) le : {{patient.dateNaissance}} <br/>
            Adresse : {{patient.adresse}} <br/>
            Numéro de secu : {{patient.numeroSecu}} <br/>
            <button class="deleteButton" (click)="deletePatient(patient.id)">X</button>
          </fieldset>
        </div>
      </div>
    </div>
  </div>

  <div id="displayBy">
    <div id="byId">
      <app-generic-button (click)="getPatientById(idPatient)" title="Afficher par id"></app-generic-button>
      <input type="text" #idPatient />

      <div [hidden]="hidden_by_id">
        <fieldset class="patientField" [ngClass]="{'activeClass': patientId.active, 'inactiveClass': !patientId.active}"><legend>{{patientId.id}}</legend>
          {{patientId.nomPatient}} {{patientId.prenomPatient}} <br/>
          Sexe : {{patientId.sexe}} <br/>
          Né(e) le : {{patientId.dateNaissance}} <br/>
          Adresse : {{patientId.adresse}} <br/>
          Numéro de secu : {{patientId.numeroSecu}}
        </fieldset>
      </div>
    </div>

    <div id="byName">
      <app-generic-button (click)="getPatientByName(namePatient)" title="Afficher par nom"></app-generic-button>
      <input type="text" #namePatient />

      <div [hidden]="hidden_by_name">
        <fieldset class="patientField" [ngClass]="{'activeClass': patientName.active, 'inactiveClass': !patientName.active}"><legend>{{patientName.nomPatient}}</legend>
          {{patientName.prenomPatient}} <br/>
          Id: {{patientName.id}} <br/>
          Sexe : {{patientName.sexe}} <br/>
          Né(e) le : {{patientName.dateNaissance}} <br/>
          Adresse : {{patientName.adresse}} <br/>
          Numéro de secu : {{patientName.numeroSecu}} 
        </fieldset>
      </div>
    </div>
  </div>

  <div id="createPatient">
    <app-generic-button (click)="togglePatient()" title="Créer un patient"></app-generic-button>

    <div [hidden]="hidden_create">
      <form id="formNewPatient" [formGroup]="newPatient" (ngSubmit)="submitCreate()">
        <div>
          <label>Nom : </label>
          <input type="text" formControlName="nom"/>
        </div>
        <div>
          <label>Prenom : </label>
          <input type="text" formControlName="prenom"/>
        </div>
        <div>
          <label>Sexe (F ou M) : </label>
          <input type="text" formControlName="sexe"/>
        </div>
        <div>
          <label>Date de naissance : </label>
          <input type="text" formControlName="dateNaissance"/>
        </div>
        <div>
          <label>Adresse : </label>
          <input type="text" formControlName="adresse"/>
        </div>
        <div>
          <label>Numéro de sécu : </label>
          <input type="text" formControlName="numSecu"/>
        </div>
        <button type="submit" [disabled]="!newPatient.valid">Valider</button>
      </form>
      
    </div>

    <div id="updatePatient">
      <app-generic-button (click)="toggleUpdatePatient()" title="Mettre à jour un patient"></app-generic-button>
      <label>Id à modifier</label>
      <input type="text" #idUpdatedPatient />  

      <div [hidden]="hidden_update">
        <form id="formUpdatePatient" [formGroup]="updatePatient" (ngSubmit)="submitUpdate(idUpdatedPatient)">
          <div>
            <label>Nom : </label>
            <input type="text" formControlName="nom"/>
          </div>
          <div>
            <label>Prenom : </label>
            <input type="text" formControlName="prenom"/>
          </div>
          <div>
            <label>Sexe (F ou M) : </label>
            <input type="text" formControlName="sexe"/>
          </div>
          <div>
            <label>Date de naissance : </label>
            <input type="text" formControlName="dateNaissance"/>
          </div>
          <div>
            <label>Adresse : </label>
            <input type="text" formControlName="adresse"/>
          </div>
          <div>
            <label>Numéro de sécu : </label>
            <input type="text" formControlName="numSecu"/>
          </div>
          <button type="submit" [disabled]="!updatePatient.valid">Valider</button>
        </form>
        
      </div>

  </div>

</div>